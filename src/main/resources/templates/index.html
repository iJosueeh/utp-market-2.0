<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layout/_layout :: head('UTP Market | Home')}"></head>
</head>

<body>
    <header th:replace="~{layout/_layout :: header}"></header>

    <main style="padding-top: 20px;">
        <section class="container py-5" style="margin-top: 200px; margin-bottom: 200px;">
            <div class="row align-items-center">
                <div class="col-md-5 text-center mb-4 mb-md-0">
                    <img src="https://res.cloudinary.com/dy8qrtq40/image/upload/v1756951052/hero-img_q7z7cu.webp"
                        alt="UTP Market" class="img-fluid rounded">
                </div>
                <div class="col-md-6 ps-md-5">
                    <h6 class="text-danger fw-bold">UTP - MARKET</h6>
                    <h1 class="fw-bold text-dark">
                        Tu marketplace confiable hecho por y para estudiantes UTP
                    </h1>
                    <p class="text-muted fs-5 mt-3">
                        Cada vez más estudiantes usan nuestra página para comprar y vender
                        servicios, materiales, guías y otros recursos académicos.
                    </p>

                    <div class="d-flex gap-3 mt-4">
                        <a th:href="@{/products}" class="btn btn-danger px-4 py-2">
                            Explorar productos
                        </a>
                        <a th:href="@{/auth/register}" class="btn btn-outline-danger px-4 py-2">
                            Únete a la comunidad
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section class="container my-2">
            <h5 class="text-black text-center">MATERIALES</h5>
            <h2 class="text-center fw-bold mb-4">Emprendimientos estudiantiles</h2>

            <div class="row">
                <!-- Card 1: Tutorías -->
                <div class="col-md-3 mb-4">
                    <div class="card h-100 shadow-sm">
                        <img th:src="@{/img/tutoria.jpg}" alt="Tutorías" class="card-img-top img-fluid"
                            style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Tutorías</h5>
                            <p class="card-text">Apoyo académico entre estudiantes para reforzar materias clave.</p>
                            <button class="btn btn-dark w-100" data-bs-toggle="modal" data-bs-target="#modalTutorias">
                                Más Información →
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 2: Guías de estudio -->
                <div class="col-md-3 mb-4">
                    <div class="card h-100 shadow-sm">
                        <img th:src="@{/img/guias.jpg}" alt="Guías de estudio" class="card-img-top img-fluid"
                            style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Guías de estudio</h5>
                            <p class="card-text">Resúmenes y materiales hechos por estudiantes para facilitar el
                                aprendizaje.</p>
                            <button class="btn btn-dark w-100" data-bs-toggle="modal" data-bs-target="#modalGuias">
                                Más Información →
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 3: Ventas de snack -->
                <div class="col-md-3 mb-4">
                    <div class="card h-100 shadow-sm">
                        <img th:src="@{/img/ventas.jpg}" alt="Ventas de snack" class="card-img-top img-fluid"
                            style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Ventas de snack</h5>
                            <p class="card-text">Snacks accesibles y prácticos dentro del campus.</p>
                            <button class="btn btn-dark w-100" data-bs-toggle="modal" data-bs-target="#modalVentas">
                                Más Información →
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 4: Materiales -->
                <div class="col-md-3 mb-4">
                    <div class="card h-100 shadow-sm">
                        <img th:src="@{/img/mt.jpg}" alt="Materiales" class="card-img-top img-fluid"
                            style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Materiales</h5>
                            <p class="card-text">Intercambio y venta de útiles y herramientas académicas.</p>
                            <button class="btn btn-dark w-100" data-bs-toggle="modal" data-bs-target="#modalMateriales">
                                Más Información →
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Modal para Tutorías -->
        <div th:replace="~{layout/contact-modal :: contactModal('modalTutorias', 'Tutorías', 'Apoyo académico entre estudiantes para reforzar materias clave.', 'Tutorías')}"></div>

        <!-- Modal para Guías de estudio -->
        <div th:replace="~{layout/contact-modal :: contactModal('modalGuias', 'Guías de estudio', 'Resúmenes y materiales hechos por estudiantes para facilitar el aprendizaje.', 'Guías de estudio')}"></div>

        <!-- Modal para Ventas de snack -->
        <div th:replace="~{layout/contact-modal :: contactModal('modalVentas', 'Ventas de snack', 'Snacks accesibles y prácticos dentro del campus.', 'Ventas de snack')}"></div>

        <!-- Modal para Materiales -->
        <div th:replace="~{layout/contact-modal :: contactModal('modalMateriales', 'Materiales', 'Intercambio y venta de útiles y herramientas académicas.', 'Materiales')}"></div>

        <!-- Script para validación de formularios -->
        <script>
            // Validación de Bootstrap para todos los formularios
            (function () {
                'use strict'
                var forms = document.querySelectorAll('.needs-validation')
                Array.prototype.slice.call(forms).forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }
                        form.classList.add('was-validated')
                    }, false)
                })
            })()
        </script>

        <!-- Sección de Reseñas -->
        <div th:replace="~{fragments/reviews-section :: reviewsSection}"></div>

        <!-- Sección de Preguntas Frecuentes -->
        <div th:replace="~{fragments/faq-section :: faqSection}"></div>

        <!-- Sección de Nuestro Equipo -->
        <div th:replace="~{fragments/team-section :: teamSection}"></div>

        <!-- Sección de Contacto -->
        <section id="contacto" class="py-5" style="background-color: #B50D30;">
            <div class="container my-5">
                <div class="text-center mb-5 text-white">
                    <p class="fw-bold fs-2">CONTÁCTANOS</p>
                    <h2 class="fw-bold fs-1">Escríbenos un mensaje</h2>
                </div>

                <div class="row justify-content-center">
                    <div class="col-12 col-md-8 col-lg-6">
                        <form th:action="@{/cita/enviar}" method="post"
                            class="p-4 shadow rounded bg-white needs-validation" novalidate>

                            <!-- Nombre -->
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Nombre Completo" th:value="${nombreCompleto}" th:readonly="${nombreCompleto != null}" required>
                                <label for="nombre">Nombre Completo</label>
                                <div class="invalid-feedback">Por favor, ingrese su nombre completo.</div>
                            </div>

                            <!-- Email -->
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="email" name="email" placeholder="Correo Electrónico" th:value="${correo}" th:readonly="${correo != null}" required>
                                <label for="email">Correo Electrónico</label>
                                <div class="invalid-feedback">Ingrese un correo electrónico válido.</div>
                            </div>

                            <!-- Asunto -->
                            <div class="form-floating mb-3">
                                <select class="form-select" id="asunto" name="asunto" required>
                                    <option value="">Selecciona un asunto</option>
                                    <option value="Consulta General">Consulta General</option>
                                    <option value="Soporte Técnico">Soporte Técnico</option>
                                    <option value="Información de Productos">Información de Productos</option>
                                    <option value="Sugerencias">Sugerencias</option>
                                    <option value="Reclamos">Reclamos</option>
                                    <option value="Otro">Otro</option>
                                </select>
                                <label for="asunto">Asunto</label>
                                <div class="invalid-feedback">Por favor, seleccione un asunto.</div>
                            </div>

                            <!-- Mensaje -->
                            <div class="form-floating mb-3">
                                <textarea class="form-control" id="mensaje" name="mensaje" placeholder="Tu Mensaje"
                                    style="height: 120px;" required></textarea>
                                <label for="mensaje">Tu Mensaje</label>
                                <div class="invalid-feedback">Por favor, escriba su mensaje.</div>
                            </div>

                            <!-- Alertas -->
                            <div th:if="${successMessage}" class="alert alert-success mt-3" role="alert">
                                <span th:text="${successMessage}">¡Mensaje enviado con éxito! Gracias por
                                    contactarnos.</span>
                            </div>

                            <div th:if="${errorMessage}" class="alert alert-danger mt-3" role="alert">
                                <span th:text="${errorMessage}">Hubo un error al enviar el mensaje.</span>
                            </div>

                            <!-- Botón -->
                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-danger btn-lg fw-bold"
                                    style="background-color: #B50D30; border-color: #B50D30;">
                                    Enviar Mensaje
                                </button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer th:replace="~{layout/_layout :: footer}"></footer>
    <div th:replace="~{/chatbot :: chatbot}"></div>

    <!-- Script para validación de formularios -->
    <script th:src="@{/js/form-validation.js}"></script>
</body>

</html>