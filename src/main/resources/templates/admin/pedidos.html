<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{admin/_admin_layout :: layout(
        title='Admin - Pedidos',
        pageContent=~{::pageContent},
        includeChartJS_=false,
        scripts=~{::page-scripts}
      )}">

<th:block th:fragment="pageContent">
    <div class="container-fluid">
        <h1 class="h3 mb-4 text-gray-800">Gestión de Pedidos</h1>

        <!-- Filtros -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Filtros de Pedidos</h6>
            </div>
            <div class="card-body">
                <form id="filterForm" class="form-inline d-flex flex-wrap align-items-center">
                    <div class="form-group mb-2 me-2">
                        <label for="estadoFilter" class="form-label mb-0 text-muted small">Estado</label>
                        <select class="form-control form-control-sm" id="estadoFilter">
                            <option value="">Todos los Estados</option>
                            <!-- Opciones de estado se cargarán dinámicamente con JS -->
                        </select>
                    </div>
                    <div class="form-group mb-2 me-2">
                        <label for="fechaInicioFilter" class="form-label mb-0 text-muted small">Fecha Inicio</label>
                        <input type="date" class="form-control form-control-sm" id="fechaInicioFilter" placeholder="Fecha Inicio">
                    </div>
                    <div class="form-group mb-2 me-2">
                        <label for="fechaFinFilter" class="form-label mb-0 text-muted small">Fecha Fin</label>
                        <input type="date" class="form-control form-control-sm" id="fechaFinFilter" placeholder="Fecha Fin">
                    </div>
                    <button type="submit" class="btn btn-primary btn-sm mb-2 me-2">Aplicar Filtros</button>
                    <button type="button" class="btn btn-secondary btn-sm mb-2" id="clearFilters">Limpiar Filtros</button>
                </form>
            </div>
        </div>

        <!-- Tabla de Pedidos -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Listado de Pedidos</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="pedidosTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Número Pedido</th>
                                <th>Fecha</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Usuario</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="pedidosTableBody">
                            <!-- Datos de pedidos se cargarán aquí con JS -->
                        </tbody>
                    </table>
                </div>
                <!-- Paginación -->
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center" id="pagination">
                        <!-- Botones de paginación se cargarán aquí con JS -->
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</th:block>

<!-- Define the scripts fragment separately -->
<th:block th:fragment="page-scripts">
    <script>
        console.log("pedidos.html: Script block loaded immediately.");
    </script>
    <script th:src="@{/js/admin-pedidos.js}"></script>
</th:block>

</html>